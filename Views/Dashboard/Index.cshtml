@inject Newfactjo.Services.PermissionService permissionService

@{
    ViewData["Title"] = "لوحة التحكم";
    var adminRole = Context.Session.GetString("AdminRole");
    <text>
        <p class="text-center text-danger">الدور الحالي المخزن في الجلسة: <strong>@adminRole</strong></p>
    </text>
}


<h2 class="mb-4">📊 لوحة التحكم</h2>

<div class="row text-center">
    <div class="col-md-4">
        <div class="card bg-danger text-white mb-3 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">عدد الأخبار</h5>
                <p class="display-4">@ViewBag.NewsCount</p>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card bg-primary text-white mb-3 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">عدد المقالات</h5>
                <p class="display-4">@ViewBag.ArticlesCount</p>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card bg-success text-white mb-3 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">عدد التصنيفات</h5>
                <p class="display-4">@ViewBag.CategoriesCount</p>
            </div>
        </div>
    </div>
</div>

<h1 class="text-center text-primary my-4">🎉 لوحة التحكم</h1>

<div class="row text-center">

    @if (permissionService.HasPermission(adminRole, "ManageNews"))
    {
        <div class="col-md-4 mb-3">
            <a class="btn btn-outline-danger w-100 py-4" asp-controller="News" asp-action="Index">
                📰 إدارة الأخبار
            </a>
        </div>
    }

    @if (permissionService.HasPermission(adminRole, "ManageArticles"))
    {
        <div class="col-md-4 mb-3">
            <a class="btn btn-outline-info w-100 py-4" asp-controller="Articles" asp-action="Index">
                ✍️ إدارة المقالات
            </a>
        </div>
    }

    @if (permissionService.HasPermission(adminRole, "ManageCategories"))
    {
        <div class="col-md-4 mb-3">
            <a class="btn btn-outline-secondary w-100 py-4" asp-controller="Categories" asp-action="Index">
                📂 إدارة التصنيفات
            </a>
        </div>
    }

    @if (permissionService.HasPermission(adminRole, "ManageHiddenCategories"))
    {
        <div class="col-md-4 mb-3">
            <a class="btn btn-outline-dark w-100 py-4" asp-controller="Admin" asp-action="ManageHiddenCategories">
                👁️‍🗨️ إدارة التصنيفات المخفية
            </a>
        </div>
    }

    @if (permissionService.HasPermission(adminRole, "ManageAds"))
    {
        <div class="col-md-4 mb-3">
            <a class="btn btn-outline-warning w-100 py-4" asp-controller="Advertisement" asp-action="Index">
                📢 إدارة الإعلانات
            </a>
        </div>
    }

    @if (permissionService.HasPermission(adminRole, "ManageLogs"))
    {
        <div class="col-md-4 mb-3">
            <a class="btn btn-outline-info w-100 py-4" asp-controller="NewsLogs" asp-action="Index">
                📝 إدارة حركات الأخبار
            </a>
        </div>
    }

    @if (permissionService.HasPermission(adminRole, "ManageUsers"))
    {
        <div class="col-md-4 mb-3">
            <a class="btn btn-outline-warning w-100 py-4" asp-controller="AdminUsers" asp-action="Index">
                👥 إدارة المستخدمين
            </a>
        </div>
    }
    @if (permissionService.HasPermission(adminRole, "ManagePermissions"))
    {
        <div class="col-md-4 mb-3">
            <a class="btn btn-outline-danger w-100 py-4" asp-controller="Permissions" asp-action="Index">
                🛡️ إدارة الصلاحيات
            </a>
        </div>
    }
    @if (permissionService.HasPermission(adminRole, "ManageRoles"))
    {
        <div class="col-md-4 mb-3">
            <a class="btn btn-outline-secondary w-100 py-4" asp-controller="Roles" asp-action="Index">
                🧩 إدارة الأدوار
            </a>
        </div>
    }


</div>
